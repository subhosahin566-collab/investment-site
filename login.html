<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyA2q99EtNf7T0HJ5HQPDVipcy4JIiUXD7A",
    authDomain: "investment-site-285a4.firebaseapp.com",
    projectId: "investment-site-285a4",
    storageBucket: "investment-site-285a4.firebasestorage.app",
    messagingSenderId: "19188315569",
    appId: "1:19188315569:web:8547c548146ea86fc43990",
    measurementId: "G-XKFGPB15GS"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  document.getElementById("loginForm").addEventListener("submit", async function(e) {
    e.preventDefault();
    const phone = document.getElementById("phone").value;
    const password = document.getElementById("password").value;

    const userRef = doc(db, "users", phone);
    const userSnap = await getDoc(userRef);

    if (userSnap.exists()) {
      const userData = userSnap.data();
      if (userData.password === password) {
        alert("Login successful!");
        window.location.href = "dashboard.html";
      } else {
        alert("Wrong password!");
      }
    } else {
      alert("User not found. Please register.");
    }
  });
</script>
